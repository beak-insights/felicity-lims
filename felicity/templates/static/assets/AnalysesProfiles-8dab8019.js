import{S as ce,u as pe,f as fe,a0 as b,h as L,i as w,r as A,o as r,c as i,N as e,a as S,L as g,M as B,F as x,E as v,A as T,a3 as I,a5 as n,H as a,K as c,ac as V,C as p,Y as R,y as z,X as k,a2 as K,Z as Y,$ as G,_ as me}from"./index-54016222.js";import{Q as ge,T as xe,U as ye,W as be}from"./analyses.mutations-fdbdb917.js";import{u as ve}from"./setup-20f4d78e.js";import{u as _e}from"./analysis-67f4ba72.js";import"./_queries-7a4a5593.js";const he={class:"space-y-6"},ke={class:"grid grid-cols-12 gap-6"},we={class:"col-span-3"},Se={class:"rounded-lg border border-border bg-card"},Pe={class:"overflow-y-auto max-h-[540px] p-2"},Ae={class:"space-y-1"},Ue=["onClick"],Ce={class:"flex items-center justify-between"},Me={class:"text-sm font-medium"},Ee={key:0,class:"text-xs text-muted-foreground"},Te={key:0,class:"text-xs text-muted-foreground mt-1 line-clamp-2"},Ve={key:0,class:"col-span-9"},De={class:"space-y-6"},je={class:"rounded-lg border border-border bg-card p-6"},Ne={class:"flex items-center justify-between"},$e={class:"space-y-1"},Fe={class:"flex items-center space-x-2"},Oe={class:"text-xl font-semibold text-foreground"},Le={key:0,class:"px-2 py-0.5 text-xs font-medium bg-accent text-accent-foreground rounded"},Be={key:0,class:"text-sm text-muted-foreground"},Ie={class:"flex items-center space-x-2"},Re={class:"border-b border-border"},ze={class:"flex space-x-2"},Ke=["onClick"],Ye={class:"rounded-lg border border-border bg-card"},Ge={class:"p-6"},He={key:0,class:"space-y-6"},Qe={class:"grid grid-cols-3 gap-6"},We={class:"text-sm font-medium"},Xe={class:"space-y-2 pt-2"},Ze={class:"flex items-center h-5"},qe=["id","onUpdate:modelValue"],Je=["for"],et={class:"flex justify-end pt-4"},tt={key:1,class:"space-y-6"},ot={class:"flex justify-between items-center"},st={class:"overflow-hidden rounded-lg border border-border"},nt={class:"w-full"},rt={class:"px-6 py-4 whitespace-nowrap border-b border-border"},dt={class:"font-medium text-foreground"},it={key:0,class:"text-sm text-muted-foreground"},lt={class:"px-6 py-4 whitespace-nowrap border-b border-border text-sm text-foreground"},at={class:"px-6 py-4 whitespace-nowrap border-b border-border text-sm text-foreground"},ut={class:"px-6 py-4 whitespace-nowrap text-right border-b border-border"},ct=["onClick"],pt={key:2,class:"space-y-6"},ft={key:1,class:"col-span-9"},mt={class:"text-xl font-semibold text-foreground"},gt={class:"space-y-4"},xt={class:"space-y-2"},yt={class:"space-y-2"},bt={class:"space-y-2"},vt=["value"],_t={class:"space-y-2"},ht={class:"space-y-2"},kt={class:"flex items-center space-x-2"},wt={class:"text-xl font-semibold text-foreground"},St={class:"space-y-4"},Pt={class:"space-y-2"},At=["value"],Ut={class:"space-y-2"},Ct={class:"space-y-2"},Mt={class:"space-y-2"},Et=ce({__name:"AnalysesProfiles",setup(Tt){const H=Y(()=>G(()=>import("./vue-multiselect.esm-03413bf7.js"),["assets/vue-multiselect.esm-03413bf7.js","assets/index-54016222.js","assets/index-a1ed10d8.css"])),Q=Y(()=>G(()=>import("./Billing-9dc27ea6.js"),["assets/Billing-9dc27ea6.js","assets/index-54016222.js","assets/index-a1ed10d8.css","assets/billing-395bc348.js"])),u=_e(),W=pe(),X=ve(),{withClientMutation:P}=fe();let y=b("analyses-services");const Z=["analyses-services","mappings","billing"];let _=b(!1),D=b("");const U=b(!0);let s=L({});const q=w(()=>W.getSampleTypes),J=w(()=>X.getDepartments);u.fetchAnalysesProfilesAndServices();const C=w(()=>u.getAnalysesServices),ee=w(()=>u.getAnalysesProfiles);function te(){const d={name:s.name,keyword:s.keyword,description:s.description,departmentUid:s.departmentUid,sampleTypes:s.sampleTypes?.map(t=>t.uid),active:s.active};P(ge,{payload:d},"createProfile").then(t=>u.addAnalysisProfile(t))}function j(){const d={name:s.name,keyword:s.keyword,description:s.description,departmentUid:s.departmentUid,active:s.active,services:s.analyses?.map(t=>t.uid),sampleTypes:s.sampleTypes?.map(t=>t.uid)};P(xe,{uid:s.uid,payload:d},"updateProfile").then(t=>u.updateAnalysesProfile(t))}function oe(d){Object.assign(s,{...d}),C.value?.forEach(t=>{t[1].forEach(m=>{m.checked=!1,m.profiles?.some(E=>E.uid===s.uid)&&(m.checked=!0)})}),u.fetchProfileMappings(d?.uid)}function se(){const d=[];C.value?.forEach(t=>{t[1].forEach(m=>{m.checked&&d.push(m)})}),s.analyses=d,j()}function N(d,t={}){U.value=d,_.value=!0,D.value=(d?"CREATE":"EDIT")+" ANALYSES PROFILE",d?Object.assign(s,{}):Object.assign(s,{...t})}function ne(){U.value===!0&&te(),U.value===!1&&j(),_.value=!1}u.fetchCodingStandards();const re=w(()=>u.profileMapings?.filter(d=>d.profileUid===s?.uid));let h=b(!1),$=b("");const M=b(!0),l=L({uid:void 0,profileUid:void 0,codingStandardUid:void 0,name:"",code:"",description:""});function de(){const d={profileUid:s?.uid,codingStandardUid:l.codingStandardUid,name:l.name,code:l.code,description:l.description};P(ye,{payload:d},"createProfileMapping").then(t=>u.addProfileMapping(t))}function ie(){const d={profileUid:s?.uid,codingStandardUid:l.codingStandardUid,name:l.name,code:l.code,description:l.description};P(be,{uid:l.uid,payload:d},"updateProfileMapping").then(t=>u.updateProfileMapping(t))}function F(d,t={}){M.value=d,h.value=!0,$.value=(d?"CREATE":"EDIT")+" CONCEPT MAPPING",d?Object.assign(l,{}):Object.assign(l,{...t})}function le(){M.value===!0&&de(),M.value===!1&&ie(),h.value=!1}return(d,t)=>{const m=A("fel-button"),E=A("fel-heading"),ae=A("fel-accordion"),O=A("fel-modal");return r(),i(x,null,[e("div",he,[S(E,{title:"Analyses Profiles"},{default:g(()=>[S(m,{onClick:t[0]||(t[0]=o=>N(!0))},{default:g(()=>t[16]||(t[16]=[B("Add Analyses Profile")])),_:1})]),_:1}),e("div",ke,[e("section",we,[e("div",Se,[t[17]||(t[17]=e("div",{class:"p-4 border-b border-border"},[e("h3",{class:"text-sm font-medium text-muted-foreground"},"Profiles")],-1)),e("div",Pe,[e("ul",Ae,[(r(!0),i(x,null,v(ee.value,o=>(r(),i("li",{key:o.uid,onClick:T(f=>oe(o),["prevent","stop"]),class:I(["rounded-md p-2 cursor-pointer transition-colors duration-200",o?.uid===n(s)?.uid?"bg-accent text-accent-foreground":"hover:bg-accent/50"])},[e("div",Ce,[e("span",Me,a(o?.name),1),o?.keyword?(r(),i("span",Ee,a(o?.keyword),1)):c("",!0)]),o?.description?(r(),i("p",Te,a(o?.description),1)):c("",!0)],10,Ue))),128))])])])]),n(s)?.uid!==void 0?(r(),i("section",Ve,[e("div",De,[e("div",je,[e("div",Ne,[e("div",$e,[e("div",Fe,[e("h2",Oe,a(n(s)?.name),1),n(s)?.keyword?(r(),i("span",Le,a(n(s)?.keyword),1)):c("",!0)]),n(s)?.description?(r(),i("p",Be,a(n(s)?.description),1)):c("",!0)]),e("div",Ie,[e("button",{onClick:t[1]||(t[1]=o=>N(!1,n(s))),class:"inline-flex items-center justify-center h-9 w-9 rounded-md border border-input bg-background text-foreground hover:bg-accent hover:text-accent-foreground transition-colors focus:outline-none focus:ring-2 focus:ring-ring"},t[18]||(t[18]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 20 20"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]))])])]),e("nav",Re,[e("div",ze,[(r(),i(x,null,v(Z,o=>e("button",{key:o,class:I(["px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",n(y)===o?"border-b-2 border-primary text-foreground":"text-muted-foreground hover:text-foreground"]),onClick:f=>V(y)?y.value=o:y=o},a(o),11,Ke)),64))])]),e("div",Ye,[e("div",Ge,[n(y)==="analyses-services"?(r(),i("div",He,[e("div",Qe,[(r(!0),i(x,null,v(C.value,o=>(r(),i("div",{key:o[0],class:"space-y-4"},[S(ae,null,{title:g(()=>[e("span",We,a(o[0]),1)]),body:g(()=>[e("ul",Xe,[(r(!0),i(x,null,v(o[1],f=>(r(),i("li",{key:f?.uid,class:"flex items-start space-x-2"},[e("div",Ze,[p(e("input",{type:"checkbox",id:`toggle-${f?.uid}`,"onUpdate:modelValue":ue=>f.checked=ue,class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,8,qe),[[R,f.checked]])]),e("label",{for:`toggle-${f?.uid}`,class:"text-sm text-foreground"},a(f?.name),9,Je)]))),128))])]),_:2},1024)]))),128))]),e("div",et,[e("button",{onClick:t[2]||(t[2]=o=>se()),class:"inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Update Profile ")])])):c("",!0),n(y)==="mappings"?(r(),i("div",tt,[e("div",ot,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-foreground"},"Concept Mappings",-1)),e("button",{onClick:t[3]||(t[3]=o=>F(!0)),class:"inline-flex items-center justify-center bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"},t[19]||(t[19]=[e("span",{class:"mr-2"},"+",-1),B(" Add Mapping ")]))]),e("div",st,[e("table",nt,[t[21]||(t[21]=e("thead",null,[e("tr",{class:"border-b border-border bg-muted/50"},[e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Name"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Code"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-muted-foreground"},"Standard"),e("th",{class:"px-6 py-3 text-right text-sm font-medium text-muted-foreground"},"Actions")])],-1)),e("tbody",null,[(r(!0),i(x,null,v(re.value,o=>(r(),i("tr",{key:o.uid,class:"hover:bg-accent/50 transition-colors duration-200"},[e("td",rt,[e("div",dt,a(o?.name),1),o?.description?(r(),i("div",it,a(o?.description),1)):c("",!0)]),e("td",lt,a(o?.code),1),e("td",at,a(o?.codingStandard?.name),1),e("td",ut,[e("button",{onClick:f=>F(!1,o),class:"inline-flex items-center px-3 py-1.5 border border-input bg-background text-foreground text-sm font-medium transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-ring hover:bg-accent hover:text-accent-foreground"}," Edit ",8,ct)])]))),128))])])])])):c("",!0),n(y)==="billing"?(r(),i("div",pt,[S(n(Q),{target:"profile",targetUid:n(s)?.uid},null,8,["targetUid"])])):c("",!0)])])])])):(r(),i("section",ft,t[22]||(t[22]=[e("div",{class:"rounded-lg border border-border bg-card p-6 flex flex-col items-center justify-center space-y-4 min-h-[400px]"},[e("div",{class:"text-4xl text-muted-foreground"},"ðŸ“‹"),e("h3",{class:"text-lg font-medium text-foreground"},"No Profile Selected"),e("p",{class:"text-sm text-muted-foreground"},"Select a profile from the list to view its details")],-1)])))])]),n(_)?(r(),z(O,{key:0,onClose:t[10]||(t[10]=o=>V(_)?_.value=!1:_=!1)},{header:g(()=>[e("h3",mt,a(n(D)),1)]),body:g(()=>[e("form",{onSubmit:T(ne,["prevent"]),class:"p-6 space-y-6"},[e("div",gt,[e("label",xt,[t[23]||(t[23]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Profile Name",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>n(s).name=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter profile name"},null,512),[[k,n(s).name]])]),e("label",yt,[t[24]||(t[24]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Keyword",-1)),p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>n(s).keyword=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter keyword"},null,512),[[k,n(s).keyword]])]),e("label",bt,[t[26]||(t[26]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Department",-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>n(s).departmentUid=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[t[25]||(t[25]=e("option",{value:""},"Select department",-1)),(r(!0),i(x,null,v(J.value,o=>(r(),i("option",{key:o.uid,value:o.uid},a(o.name),9,vt))),128))],512),[[K,n(s).departmentUid]])]),e("label",_t,[t[27]||(t[27]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Sample Types",-1)),S(n(H),{modelValue:n(s).sampleTypes,"onUpdate:modelValue":t[7]||(t[7]=o=>n(s).sampleTypes=o),options:q.value,multiple:!0,"track-by":"uid",label:"name",placeholder:"Select sample types",class:"multiselect-primary"},null,8,["modelValue","options"])]),e("label",ht,[t[28]||(t[28]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=o=>n(s).description=o),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter profile description"},null,512),[[k,n(s).description]])]),e("div",kt,[p(e("input",{type:"checkbox",id:"isActive","onUpdate:modelValue":t[9]||(t[9]=o=>n(s).active=o),class:"h-4 w-4 rounded border-input bg-background text-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,512),[[R,n(s).active]]),t[29]||(t[29]=e("label",{for:"isActive",class:"text-sm font-medium text-muted-foreground"},"Active",-1))])]),t[30]||(t[30]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):c("",!0),n(h)?(r(),z(O,{key:1,onClose:t[15]||(t[15]=o=>V(h)?h.value=!1:h=!1)},{header:g(()=>[e("h3",wt,a(n($)),1)]),body:g(()=>[e("form",{onSubmit:T(le,["prevent"]),class:"p-6 space-y-6"},[e("div",St,[e("label",Pt,[t[32]||(t[32]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Coding Standard",-1)),p(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>l.codingStandardUid=o),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring"},[t[31]||(t[31]=e("option",{value:""},"Select standard",-1)),(r(!0),i(x,null,v(n(u).codingStandards,o=>(r(),i("option",{key:o.uid,value:o.uid},a(o.name),9,At))),128))],512),[[K,l.codingStandardUid]])]),e("label",Ut,[t[33]||(t[33]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Name",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>l.name=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter mapping name"},null,512),[[k,l.name]])]),e("label",Ct,[t[34]||(t[34]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Code",-1)),p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>l.code=o),type:"text",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground",placeholder:"Enter mapping code"},null,512),[[k,l.code]])]),e("label",Mt,[t[35]||(t[35]=e("span",{class:"text-sm font-medium text-muted-foreground"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=o=>l.description=o),rows:"3",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring placeholder:text-muted-foreground resize-none",placeholder:"Enter mapping description"},null,512),[[k,l.description]])])]),t[36]||(t[36]=e("div",{class:"pt-4"},[e("button",{type:"submit",class:"w-full bg-primary text-primary-foreground hover:bg-primary/90 rounded-lg px-4 py-2 text-sm font-medium transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ring"}," Save Changes ")],-1))],32)]),_:1})):c("",!0)],64)}}});const Ft=me(Et,[["__file","/Users/admin/Documents/Development/felicity/felicity-lims/webapp/views/admin/analyses/AnalysesProfiles.vue"]]);export{Ft as default};
